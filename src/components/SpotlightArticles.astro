---
import type { CollectionEntry } from "astro:content";
import { BASE_PATH } from "@/utils/constants";

export interface Props {
  posts: CollectionEntry<"blog">[];
}

const { posts } = Astro.props;
---

<section id="spotlight" class="mt-16 scroll-mt-24 space-y-10 md:mt-20">
  <!-- Section Header -->
  <div class="flex flex-col gap-4 md:flex-row md:items-end md:justify-between">
    <div>
      <p class="text-xs font-semibold uppercase tracking-[0.36em] text-muted-foreground">
        Spotlight
      </p>
      <h2 class="mt-2 font-display text-3xl text-foreground md:text-4xl">
        Historias que inspiran una vida más consciente
      </h2>
    </div>
    <p class="max-w-xl text-sm text-muted-foreground">
      Lecturas cortas sobre tecnología, bienestar y decisiones digitales con propósito.
    </p>
  </div>

  <!-- Stories Grid -->
  <div class="grid gap-8 md:grid-cols-2">
    {posts.map((post) => {
      const { title, snippet, image, publishDate, author, category } = post.data;
      return (
        <article class="overflow-hidden rounded-2xl border border-border/70 bg-white">
          {image?.src && (
            <img
              src={`${image.src}&sat=-6`}
              alt={image.alt || title}
              class="h-64 w-full object-cover"
              loading="lazy"
            />
          )}
          <div class="space-y-4 p-8">
            <!-- Category -->
            {category && (
              <span class="inline-flex rounded-full bg-muted/40 px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.3em] text-muted-foreground">
                {category}
              </span>
            )}

            <!-- Title -->
            <h3 class="font-display text-2xl text-foreground">
              <a href={`${BASE_PATH}/blog/${post.slug}`} class="transition hover:text-primary">
                {title}
              </a>
            </h3>

            <!-- Snippet -->
            {snippet && <p class="text-sm text-muted-foreground">{snippet}</p>}

            <!-- Author + Meta -->
            <div class="flex items-center justify-between text-xs text-muted-foreground">
              <div>
                {author && <p class="font-semibold text-foreground">{author}</p>}
              </div>
              <div class="text-right">
                <p>{new Date(publishDate).toLocaleDateString("es-ES", { dateStyle: "long" })}</p>
              </div>
            </div>
          </div>
        </article>
      );
    })}
  </div>
</section>
